function BIQWidgetStructure(){}function BIQThemeDialog(e,t,i,a,n,o){var l=this;l.biq_theme_manager=null,l.customFullScreen=t("xs")||t("sm"),l.elementWrapperDefault={target:document.getElementById(main_wrapper_id)},l.template=null,l.params={},l.show=function(i,a){l.params=a;var n=(t("sm")||t("xs"))&&l.customFullscreen;e.show({controller:l.controller,template:l.template,parent:angular.element(document.body),targetEvent:l.elementWrapperDefault,clickOutsideToClose:!0,escapeToClose:!0,fullscreen:n}).then(function(e){},function(){l.hide()})},l.controller=function(e,i){e.input_value=l.params.values,e.hide=function(e){e="undefined"!=typeof e?e:!1,l.hide(e),i.hide()},e.submit=function(t){var i=new FormData($b("#widget-dialog form")[0]);for(var r in e.input_value){var d=bisnull(e.input_value[r])||"undefined"===e.input_value[r]?"":e.input_value[r];i.append(r,d)}var s=$b(".lf-ng-md-file-input");if(s.length)for(var u=0;u<s.length;u++){var c=angular.element($b(s[u])).data("$ngModelController").$modelValue[0];bisnull(c)||i.append($b(s[u]).attr("lf-files"),c.lfFile)}i.append("action","widget_save"),l.functions.maskShow("widget-dialog"),$b.ajax({url:ajaxurl,type:"POST",data:i,async:!1,cache:!1,contentType:!1,processData:!1,success:function(t){var i=JSON.parse(t);i.is_found?(e.hide(!0),$b("body").find('[data-biq-widget-id="'+i.widget_id+'"]').replaceWith(i.html),o(function(){n.BIQThemeManager.widgetHoverApply(i.widget_id)}),a("Widget succesfully updated","success")):(l.functions.maskHide("widget-dialog"),a("Widget update failed: "+i.html,"error"))}})},e.dialog={},e.$watch(function(){return t("gt-sm")},function(t){e.dialog.flex=t?40:100,e.dialog.height=t?"auto":"100%"}),e.$watch(function(){return t("xs")||t("sm")},function(e){l.customFullscreen=e===!0})},l.hide=function(e){e="undefined"!=typeof e?e:!1,l.functions.maskHide("widget-dialog"),e||a("Widget edit canceled","warning")},l.functions={maskShow:function(e){i.start({referenceId:e})},maskHide:function(e){i.stop({referenceId:e})}}}function BIQThemeManager(){var e=this;e.BIQWidgetElementParser=null,e.structure=new BIQWidgetStructure,e.structure_item=null,e.dialog=null,e.init=function(){$b(document).ready(function(){e.loading("body",1500),e.hoverToEdit(),window.onbeforeunload=function(){e.loading("body")}})}}function BIQWidgetElementParser(){}BIQWidgetStructure.prototype.contact_email_simple={title:"Setting - Contact Email Simple",attribute_main:[{key:"content",type:"text",label:"Email Address",required:!0,input_attrs:'type="email"'},{key:"icon_type",type:"radio",label:"Icon type",value:[{label:"Image",value:"image"},{label:"Class",value:"class"}]},{key:"icon_value",type:"text",label:"URL Image / class","default":template_uri+"/images/biq/widgets/icon-contact-email-21x14.png",placeholder:"Leave empty for default value"}],attribute_css:[{key:"css_inline",type:"text",label:"Inline CSS"},{key:"classes",type:"text",label:"CSS Classes",placeholder:"Sparate by space for multiple class name"}]},BIQWidgetStructure.prototype.contact_phone_simple={attribute_main:[]},BIQWidgetStructure.prototype.logo={title:"Setting - Logo",attribute_main:[{key:"img_file_name",type:"file",label:"Browse"},{key:"img_title",type:"text",label:"Image Title"},{key:"img_alt",type:"text",label:"Alternative text"}],attribute_css:[{key:"css_inline",type:"text",label:"Inline CSS"},{key:"classes",type:"text",label:"CSS Classes",placeholder:"Sparate by space for multiple class name"}]},BIQThemeManager.prototype.hoverToEdit=function(){var e=this;e.hover_to_edit={widget_sel:null,hide_delay:500,is_editing:!1,hide_timeout_obj:null,hide:function(e){e="undefined"!=typeof e?e:100,$b(".hover-to-edit .highlight").hide(e,function(){$b(".hover-to-edit").hide(0)})},auto_hide:function(){var e=this;e.hide()},onmouseleave:function(){var e=this;e.hide_timeout_obj=setTimeout(function(){e.auto_hide()},e.hide_delay)},set_overlay_sizes:function(){var t=e.hover_to_edit.widget_sel.offset();$b(".hover-to-edit").css({left:t.left+"px",top:t.top+"px"}),$b(".hover-to-edit .highlight").css({width:e.hover_to_edit.widget_sel.outerWidth(),height:e.hover_to_edit.widget_sel.outerHeight()})}};var t='<div class="hover-to-edit"> \n		<div class="highlight" title="Double click here to edit"></div>\n		<div class="footer"><div class="button edit">Edit</div></div>\n	    </div>';$b("body").append(t),$b(".hover-to-edit .highlight").on("dblclick",function(t){e.editWidget(t)}),$b(".hover-to-edit .footer .button").on("click",function(t){e.editWidget(t)}),$b(".hover-to-edit").on("hover",function(t){"mouseenter"===t.type?(e.hover_to_edit.is_editing=!1,clearTimeout(e.hover_to_edit.hide_timeout_obj)):"mouseleave"===t.type&&e.hover_to_edit.onmouseleave()}),e.widgetHoverApplyAll()},BIQThemeManager.prototype.widgetHoverApplyAll=function(){var e=this;$b(".biq-widgets").on("hover",function(t){"mouseenter"===t.type&&($b(".hover-to-edit .highlight").stop(!0,!0),e.hover_to_edit.widget_sel=$b(this),e.hover_to_edit.set_overlay_sizes(),$b(".hover-to-edit").show(0,function(){$b(".hover-to-edit .highlight").show(200)}))})},BIQThemeManager.prototype.widgetHoverApply=function(e){var t=this;$b('.biq-widgets[data-biq-widget-id="'+e+'"]').on("hover",function(e){"mouseenter"===e.type&&(t.hover_to_edit.widget_sel=$b(this),t.hover_to_edit.set_overlay_sizes(),$b(".hover-to-edit").show(0,function(){$b(".hover-to-edit .highlight").show(200)}))})},BIQThemeManager.prototype.initToggleButton=function(e){$b(e+" btn-group[data-toggle-name]").each(function(){var e=$b(this),t=e.parents("form").eq(0),i=e.attr("data-toggle-name"),a=$b('input[name="'+i+'"]',t);$b("button",e).each(function(){var e=$b(this);e.live("click",function(){a.val($b(this).val()),alert(a.val())}),e.val()===a.val()&&e.addClass("active")})})},BIQThemeManager.prototype.editWidget=function(e){var t=this;t.hover_to_edit.is_editing=!0;var i=t.generateWidgetInputAll();t.dialog.biq_theme_manager=t,t.dialog.template='	    <md-dialog id="widget-dialog" aria-label="'+i.title+'" class="bs-loading-container" 		     bs-loading-overlay="widget-dialog" bs-loading-overlay-template-url="'+template_uri+'/backend/app/template/dialog/dialog-default.html" 		     bs-loading-overlay-delay="2000" flex="{{dialog.flex}}" style="height:{{dialog.height}}" 		ng-cloak> 	    <form name="widget-form" class="biq-dialog"> 		<md-toolbar class="bdialog-toolbar"> 		  <div class="md-toolbar-tools"> 		    <h2>'+i.title+'</h2> 		    <span flex></span> 		    <md-button class="md-icon-button" ng-click="hide()"> 		      <md-icon md-svg-src="'+template_uri+'/images/icon/dialog_close.svg" aria-label="Close dialog"></md-icon> 		    </md-button> 		  </div> 		</md-toolbar> 		<md-dialog-content layout="column" layout-padding>                     <input type="hidden" name="widget_type" ng-model="input_value.widget_type">                    <input type="hidden" name="widget_id" ng-model="input_value.widget_id">			<biq-tab tab-type="tab" header-height="40" style="margin:5px;" container-width="100%">		    '+i.main+i.css+'  </biq-tab>		</md-dialog-content> 		<md-dialog-actions layout="row"> 		    <span flex></span> 		    <md-button type="submit" ng-click="submit(true)" class="md-primary" md-autofocus>Submit</md-button> 		    <md-button ng-click="hide()" style="margin-left:10px;">Cancel</md-button> 		</md-dialog-actions> 	    </form> 	</md-dialog>';var a=t.BIQWidgetElementParser.getValues(t.hover_to_edit.widget_sel.data("biqWidgetType"),t.hover_to_edit.widget_sel,t.structure_item);t.dialog.show(e,{values:a}),t.hover_to_edit.onmouseleave()},BIQThemeManager.prototype.getLayoutClass=function(){for(var e=this,t="",i=["header","body","footer"],a=e.hover_to_edit.widget_sel.closest(".layout"),n=0;n<i.length;n++)a.hasClass(i[n])&&(t=i[n]);return t},BIQThemeManager.prototype.generateWidgetInputAll=function(){var e=this,t={main:"-",css:"-",title:"-",layout:""},i=e.hover_to_edit.widget_sel.attr("class"),a=(i.split(" "),e.hover_to_edit.widget_sel.data("biqWidgetType"));e.structure_item=e.structure[a];for(var n="",o=0;o<e.structure_item.attribute_main.length;o++){var l=e.structure_item.attribute_main[o];switch(l.type){case"text":n+=e.generateInputForm.text(l);break;case"radio":n+=e.generateInputForm.radio(l);break;case"file":n+=e.generateInputForm.file(l)}}t.main='<biq-tab-item title="Main">'+n+"</biq-tab-item>";for(var r="",o=0;o<e.structure_item.attribute_css.length;o++){var d=e.structure_item.attribute_css[o];switch(d.type){case"text":r+=e.generateInputForm.text(d);break;case"radio":r+=e.generateInputForm.radio(d)}}return t.css='<biq-tab-item title="CSS">'+r+"</biq-tab-item>",t.title=e.structure_item.title,t.layout=e.getLayoutClass(),t},BIQThemeManager.prototype.generateInputForm={text:function(e){var t=e.hasOwnProperty("required")&&e.required,i=t?' ng-required="true"':"",a=e.hasOwnProperty("input_attrs")?e.input_attrs:"",n=bisnull(e.placeholder)?"":"( "+e.placeholder+" )",o='<md-input-container class="md-block" flex> 		    <label>'+e.label+": "+n+'</label> 		    <input name="'+e.key+'"'+i+' ng-model="input_value.'+e.key+'" '+a+'> 		    <div ng-if="'+t+'" ng-messages="widget-form.'+e.key+'.$error"> 			<div ng-message="required" style="text-align:right;">'+e.label+" is required.</div> 		    </div> 		</md-input-container>";return o},file:function(e){var t='<lf-ng-md-file-input lf-files="'+e.key+'" lf-browse-label="'+e.label+'"                          accept="image/*" ng-disabled="ctrl.disabled01">                     </lf-ng-md-file-input>';return t},radio:function(e){for(var t='<md-input-container class="md-block" flex>		    <md-radio-group ng-model="input_value.'+e.key+'" layout="row">\n		    <span class="label1 w10">'+e.label+"</span>",i=0;i<e.value.length;i++){var a=e.value[i].label,n=e.value[i].value;t=t+'<md-radio-button value="'+n+'" class="md-primary">'+a+"</md-radio-button>"}var t=t+"</md-radio-group>\n		</md-input-container>";return t}},BIQThemeManager.prototype.loading=function(e,t){var i='<div id="biq-loading">\n	<div class="image">\n	    <img src="'+template_uri+'/images/biq/biq-logo.png"\n	    <br /><h3>Loading...</h3>\n	</div>\n    </div>';$b(e).append(i),"undefined"!=typeof t&&setTimeout(function(){$b("#biq-loading").hide(200)},t)},BIQWidgetElementParser.prototype.getValues=function(e,t,i){var a={},n=this,o=n.typeToFunction(e);return a=n[o](t,i)},BIQWidgetElementParser.prototype.contactEmailSimple=function(e,t){var i={},a=this;if(i.widget_id=e.data("biqWidgetId"),i.widget_type=e.data("biqWidgetType"),i.content=e.children(".text").html(),e.children(".icon").children("img").length){i.icon_type="image";var n=e.children(".icon").children("img").attr("src");i.icon_value=n===a.getDefaultValue(t,"icon_value")?"":n}else i.icon_type="css",i.icon_value=e.children(".icon").children("span").attr("class");return i.css_inline=e.attr("style"),i.classes=a.getClassNames(e.attr("class")),i},BIQWidgetElementParser.prototype.logo=function(e,t){var i={},a=this;return i.widget_id=e.data("biqWidgetId"),i.widget_type=e.data("biqWidgetType"),i.img_title=e.children("img").attr("title"),i.img_alt=e.children("img").attr("alt"),i.css_inline=e.attr("style"),i.classes=a.getClassNames(e.attr("class")),i},BIQWidgetElementParser.prototype.getDefaultValue=function(e,t){for(var i="",a=0;a<e.attribute_main.length;a++)e.attribute_main[a].key===t&&(i=e.attribute_main[a]["default"]);for(var a=0;a<e.attribute_css.length;a++)e.attribute_css[a].key===t&&(i=e.attribute_css[a]["default"]);return i},BIQWidgetElementParser.prototype.getClassNames=function(e){var t="",i=e.split(" ");i.splice(0,2);for(var a=0;a<i.length;a++)t+=i[a],a!==i.length-1&&(t+=" ");return t},BIQWidgetElementParser.prototype.typeToFunction=function(e){for(var t="",i=e.split("_"),a=0;a<i.length;a++){var n=i[a];0!==a&&(n=n.ucfirst()),t+=n}return t};var biqTab=function(e){return{restrict:"E",transclude:!0,scope:{tabType:"@",headerHeight:"@",containerWidth:"@",ngclass:"="},controller:["$scope","$attrs",function(e,t){var i=this,a=e.panes=[];e.headerHeightClass=function(){return" h"+e.headerHeight},e.containerStyle={},t.hasOwnProperty("containerWidth")&&(e.containerStyle.width=t.containerWidth),e.select=function(e){angular.forEach(a,function(e){e.selected=!1}),e.selected=!0},e.click=function(t){e.select(t),"url"===e.tabType&&(window.location=t.url)},i.addPane=function(t){0!==a.length&&"undefined"==typeof t.active||e.select(t),a.push(t)}}],template:'<div class="biq-tab disable-select{{headerHeightClass()}}">\n	    <ul>\n	      <li ng-repeat="pane in panes" ng-class="{active:pane.selected}">\n		<span ng-click="click(pane)">{{pane.title}}</span>\n	      </li>\n	    </ul>\n	    <div ng-show="tabType===\'tab\'" class="tab-content" ng-transclude ng-style={{containerStyle}}></div>\n	  </div>'}},biqTabItem=function(){return{require:"^^biqTab",restrict:"E",transclude:!0,scope:{title:"@",url:"@",active:"@"},link:function(e,t,i,a){a.addPane(e)},template:'<div class="tab-pane animate-show" ng-show="selected">\n		<div ng-transclude></div>\n	    </div>'}},bngapp=angular.module("BApp",["ngAnimate","ngMaterial","lfNgMdFileInput","bsLoadingOverlay","ui-notification"]).controller("BCtrl",function(e,t,i,a){i.BIQThemeManager=a,i.BIQThemeManager.init(),i.scopeCtrl=e,angular.element(document).ready(function(){})}).factory("BIQThemeDialog",function(e,t,i,a,n,o){var l=new BIQThemeDialog(e,t,i,a,n,o);return l}).factory("BIQThemeManager",function(e,t,i){var a=new BIQThemeManager(e);return a.BIQWidgetElementParser=i,a.dialog=t,a}).factory("BIQWidgetElementParser",function(){var e=new BIQWidgetElementParser;return e}).directive("biqTab",biqTab).directive("biqTabItem",biqTabItem).config(function(e){e.setOptions({delay:2500,startTop:20,startRight:10,verticalSpacing:20,horizontalSpacing:20,positionX:"left",positionY:"bottom"})});
//# sourceMappingURL=app/app.min.js.map
